!function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use strict";function r(e,t,n){function r(t,n,r){return"schedule.viewSchedule"===t?void o(n,r):void e.go(t,n,r)}function i(e){t.open(e,"_blank")}function o(t,r){var i=n.getSchedulingOptions();t.noTimeConflicts=i.noTimeConflicts,e.go("schedule.viewSchedule",t,r)}function s(t,n,r){return"http://berkeleyscheduler.com/"+e.href(t,n,r)}var a=this;a.goToState=r,a.goToExternal=i,a.getHref=s}t.exports=r},{}],2:[function(e,t,n){!function(){"use strict";angular.module("berkeleyScheduler",["ui.router","ngSanitize","ngCookies","ngMaterial","angulartics","angulartics.google.analytics"]),e("./config"),e("./courses.factory"),e("./reverseLookup.factory"),e("./schedule.factory"),e("./_base.controller"),e("./courseFind.controller"),e("./exportToCalendarDialog.controller"),e("./generatingSchedules.controller"),e("./mobileUnoptimizedDialog.controller"),e("./viewCourse.controller"),e("./viewSchedule.controller"),e("./courseDisplay.directive"),e("./generateSchedules.directive"),e("./scheduleDisplay.directive"),e("./run")}()},{"./_base.controller":1,"./config":3,"./courseDisplay.directive":4,"./courseFind.controller":5,"./courses.factory":6,"./exportToCalendarDialog.controller":7,"./generateSchedules.directive":8,"./generatingSchedules.controller":9,"./mobileUnoptimizedDialog.controller":10,"./reverseLookup.factory":11,"./run":12,"./schedule.factory":13,"./scheduleDisplay.directive":14,"./viewCourse.controller":15,"./viewSchedule.controller":16}],3:[function(e,t,n){angular.module("berkeleyScheduler").config(["$compileProvider","$stateProvider","$urlRouterProvider","$mdThemingProvider","$mdIconProvider",function(e,t,n,r,i){e.debugInfoEnabled(!1),t.state("schedule",{url:"/schedule",templateUrl:"html/schedule.html",controller:"CourseFindCtrl",controllerAs:"vm"}).state("schedule.viewCourse",{url:"/course/{id}",templateUrl:"html/view_course.partial.html",controller:"ViewCourseCtrl",controllerAs:"vm"}).state("schedule.generatingSchedules",{url:"/generate?scheduleGroupId&startScheduleId",templateUrl:"html/generating_schedules.partial.html",controller:"GeneratingSchedulesCtrl",controllerAs:"vm"}).state("schedule.viewSchedule",{url:"/{scheduleId}?noTimeConflicts",templateUrl:"html/view_schedule.partial.html",controller:"ViewScheduleCtrl",controllerAs:"vm"}),n.otherwise("schedule");var o={50:"#0073e1",100:"#0066c8",200:"#0059ae",300:"#004c95",400:"#003f7b",500:"#003262",600:"#002548",700:"#00182f",800:"#000b15",900:"#000000",A100:"#0080fb",A200:"#158dff",A400:"#2f99ff",A700:"#000000"};r.definePalette("berkeley-primary",o);var s={50:"#785301",100:"#916501",200:"#ab7601",300:"#c48802",400:"#dd9902",500:"#f6ab02",600:"#fdbd2e",700:"#fdc548",800:"#fecd61",900:"#fed57a",A100:"#fdbd2e",A200:"#FDB515",A400:"#f6ab02",A700:"#fedd93"};r.definePalette("berkeley-accent",s),r.theme("default").primaryPalette("berkeley-primary").accentPalette("berkeley-accent"),i.defaultViewBoxSize(48).defaultIconSet("svg/final/sprite.defs.svg")}])},{}],4:[function(e,t,n){function r(){function e(e,t,n,r){function o(){u.selectAllSections?n.course.sections.forEach(function(e){e.selected=!0}):n.course.sections.forEach(function(e){e.selected=!1}),s()}function s(){r.setStale(!0)}function a(e){return u.sectionTypeMapping[e.type]}i.call(this,e,t,r);var u=this;u.sectionTypeMapping={LEC:0,DIS:3,GRP:5,LAB:7},u.selectAllSections=!1,u.onChangeSelectAllSections=o,u.setSchedulesStale=s,u.extractSectionTypeMapping=a}return e.prototype=Object.create(i.prototype),{scope:{course:"="},controller:["$state","$window","$scope","scheduleFactory",e],controllerAs:"vm",templateUrl:"html/course_display.partial.html"}}var i=e("./_base.controller");angular.module("berkeleyScheduler").directive("bsCourseDisplay",[r])},{"./_base.controller":1}],5:[function(e,t,n){function r(e,t,n,r,o){function s(e){return e?v.subjectAreasList.filter(a(e)):v.subjectAreasList}function a(e){return e=angular.lowercase(e),function(t){return 0===angular.lowercase(t.code).indexOf(e)||(0===angular.lowercase(t.description).indexOf(e)||t.abbreviations.some(function(t){return 0===angular.lowercase(t).indexOf(e)}))}}function u(e){return e?void n.getCoursesQBySubjectAreaCode(e.code).then(function(e){v.coursesList=e,v.courseIsDisabled=!1}):(v.courseIsDisabled=!0,void(v.coursesList=[]))}function c(e){return e?v.coursesList.filter(l(e)):v.coursesList}function l(e){return e=angular.lowercase(e),function(t){return 0===angular.lowercase(t.courseNumber).indexOf(e)||0===angular.lowercase(t.title).indexOf(e)}}function d(e){e&&g(e)}function h(e){var t=e.courseNumber;return parseInt(S.exec(t)[2])}function f(e){var t=e.courseNumber;return S.exec(t)[3]}function p(e){var t=e.courseNumber;return S.exec(t)[1]}function m(){r.setStale(!0)}function g(e){r.addCourse(e)}function y(e){r.dropCourse(e)}o.pageTrack("/schedule"),i.call(this,e,t,r);var v=this;v.scheduleIsReady=r.isReady(),v.subjectAreaIsDisabled=!1,v.courseIsDisabled=!0,v.selectedCourse=null,v.coursesList=[],v.subjectAreasList=[],v.searchSubjectArea=s,v.selectSubjectArea=u,v.searchCourse=c,v.selectCourse=d,v.extractCourseNumberNumber=h,v.extractCourseNumberSuffix=f,v.extractCourseNumberPrefix=p,v.addedCoursesList=r.getAllCourses(),v.setSchedulesStale=m,v.addCourse=g,v.dropCourse=y,v.generateSchedulesQ=r.generateSchedulesQ,n.getSubjectAreasQ().then(function(e){v.subjectAreasList=e}),r.registerSetReadyListener(function(e){v.scheduleIsReady=e}),r.registerAddCourseListener(function(e){v.addedCoursesList.push(e),v.scheduleIsReady&&v.goToState("schedule.viewCourse",{id:e.id})}),r.registerDropCourseListener(function(e){v.addedCoursesList.remove(e),0!=v.addedCoursesList.length?v.goToState("schedule.viewCourse",{id:v.addedCoursesList[v.addedCoursesList.length-1].id}):v.goToState("schedule")});var S=/^([a-zA-Z]*)(\d+)([a-zA-Z]*)/}var i=e("./_base.controller");r.prototype=Object.create(i.prototype),angular.module("berkeleyScheduler").controller("CourseFindCtrl",["$state","$window","courses","scheduleFactory","$analytics",r])},{"./_base.controller":1}],6:[function(e,t,n){"use strict";function r(e,t){function n(){return l}function r(t){if(t in c)return c[t];var n=u(t),r=a.replace("{}",n),o=e.get(r).then(function(e){var t=e.data;return Object.keys(t).map(function(e){return i.parse(t[e])})},function(){return[]});return c[t]=o,o}function u(e){return e.replace(/\W/g,"")}var c={},l=t.all([e.get(o).then(function(e){return e.data}),e.get(s).then(function(e){return e.data},function(){return{}})]).then(function(e){var t=e[0].subjectAreas,n=e[1];return Object.keys(t).map(function(e){return{code:e,description:t[e],abbreviations:e in n?n[e]:[]}})});return{getSubjectAreasQ:n,getCoursesQBySubjectAreaCode:r}}var i=e("../models/course"),o="data/final/departments.json",s="data/final/abbreviations.json",a="data/final/fa16/classes/{}.json";angular.module("berkeleyScheduler").factory("courses",["$http","$q",r])},{"../models/course":17}],7:[function(e,t,n){function r(){return new Date(2016,7,24)}function i(e,t,n,i,d){function h(){var e=new Blob([m.toString()],{type:"text/calendar;charset=utf-8"});a.saveAs(e,p.calendarFilename),n.hide()}function f(){n.hide()}o.call(this,e,t,i);var p=this;p.schedule=d,p.calendarFilename="fa16 academic calendar.ics",p.download=h,p.cancel=f;var m=s({domain:"berkeleyscheduler.com",prodId:{company:"Berkeley Scheduler",product:"berkeleyscheduler.com",language:"EN"},name:"Fall 2016 Academic Calendar",url:p.getHref("schedule.viewSchedule",{scheduleId:d.id,noTimeConflicts:i.getSchedulingOptions().noTimeConflicts}),timezone:"America/Los_Angeles",method:"add"});Object.keys(p.schedule.courses).forEach(function(e){p.schedule.courses[e].forEach(function(e){var t=e.course,n=e.meetings[0],i=[];for(var o in l)n.days[o]&&i.push(l[o]);if(i.length>0){var s=r();s.setHours(n.startTime.hours,n.startTime.minutes);var a=new Date(s.getTime()+n.getTotalMinutes()*u);m.createEvent({uid:"fa16/"+t.id+"/"+e.id,start:s,end:a,repeating:{freq:"WEEKLY",until:c,byDay:i},summary:t.department+" "+t.courseNumber+" "+e.type+" "+e.number,description:t.description,location:n.location,organizer:{name:"Berkeley Scheduler",email:"berkeley-scheduler@berkeley.edu"},url:p.getHref("schedule.viewCourse",{id:t.id})})}})})}var o=e("./_base.controller"),s=e("ical-generator"),a=e("file-saver"),u=6e4,c=new Date(2016,11,3),l={Sunday:"su",Monday:"mo",Tuesday:"tu",Wednesday:"we",Thursday:"th",Friday:"fr",Saturday:"sa"};i.prototype=Object.create(o.prototype),angular.module("berkeleyScheduler").controller("ExportToCalendarDialogCtrl",["$state","$window","$mdDialog","scheduleFactory","schedule",i])},{"./_base.controller":1,"file-saver":27,"ical-generator":33}],8:[function(e,t,n){function r(){function e(e,t,n){function r(){n.setSchedulingOption("preferMornings",!1,!1),n.setSchedulingOption("preferAfternoons",!1,!1),n.setSchedulingOption("preferEvenings",!1,!1),n.setSchedulingOption("minimizeGaps",!1,!1),n.setSchedulingOption("maximizeGaps",!1,!1),n.setSchedulingOption("preferNoTimeConflicts",!1,!1),n.setSchedulingOption(g.selectedSortingOption,!0,!0),s()}function s(){var e=g.scheduleGenerationStatus.status;"done"!==e&&"failed"!==e||n.filterAndReorderSchedules()}function a(){var e=n.getCurrScheduleId();void 0===e&&u(),g.goToState("schedule.viewSchedule",{scheduleId:e})}function u(){g.goToState("schedule.generatingSchedules",{scheduleGroupId:n.getCurrentScheduleGroupId()})}function c(e){e&&l(!1),g.showSavedSchedules=e,n.setSchedulingOption("showSavedSchedules",g.showSavedSchedules)}function l(e){e&&c(!1),g.showOptions=e,n.setSchedulingOption("showOptions",g.showOptions)}function d(){g.disablePreferNoTimeConflicts=g.noTimeConflicts,n.setSchedulingOption("noTimeConflicts",g.noTimeConflicts),s()}function h(){for(var e=v.slice(),t=i.parse(g.selectedDayStartTimeJson);e.length>0&&e[0].compareTo(t)<0;)e.shift();g.dayEndTimes=e,n.setSchedulingOption("dayStartTime",t),s()}function f(){for(var e=v.slice(),t=i.parse(g.selectedDayEndTimeJson);e.length>0&&e[e.length-1].compareTo(t)>0;)e.pop();g.dayStartTimes=e,n.setSchedulingOption("dayEndTime",t),s()}function p(e){var t=i.parse(g.selectedDayStartTimeJson);return e.hours===t.hours&&e.minutes===t.minutes}function m(e){var t=i.parse(g.selectedDayEndTimeJson);return e.hours===t.hours&&e.minutes===t.minutes}o.call(this,e,t,n);for(var g=this,y=[],v=[],S=8,T=24,w=S;w<T;w++)y.push(new i(w,0)),v.push(new i(w,0)),v.push(new i(w,30));y.push(new i(w,0)),v.push(new i(w,0));var A=n.getSchedulingOptions();g.scheduleGenerationStatus=n.getScheduleGenerationStatus(),g.showSavedSchedules=A.showSavedSchedules,g.showOptions=A.showOptions,g.toggleSavedSchedules=c,g.toggleOptions=l,g.viewSchedules=a,g.generateAndViewSchedules=u,g.sortingOptions={preferMornings:"preferMornings",preferAfternoons:"preferAfternoons",preferEvenings:"preferEvenings",minimizeGaps:"minimizeGaps",maximizeGaps:"maximizeGaps",minimizeNumberOfDays:"minimizeNumberOfDays",maximizeNumberOfDays:"maximizeNumberOfDays",preferNoTimeConflicts:"preferNoTimeConflicts",noPreference:"noPreference"},g.selectedSortingOption=g.sortingOptions.noPreference;for(var b in g.sortingOptions)if(A[b]){g.selectedSortingOption=b;break}g.onChangeSortingOption=r,g.selectedDayStartTimeJson=A.dayStartTime||v[0],g.selectedDayEndTimeJson=A.dayEndTime||v[v.length-1],g.dayStartTimes=v,g.dayEndTimes=v,g.onSelectDayStartTime=h,g.onSelectDayEndTime=f,g.isSelectedDayStartTime=p,g.isSelectedDayEndTime=m,g.noTimeConflicts=A.noTimeConflicts,g.onChangeNoTimeConflicts=d,g.savedSchedules=n.getSavedSchedules(),g.dropSavedSchedule=function(e,t){e.stopPropagation(),n.dropSavedSchedule(t)},n.registerScheduleGenerationStatusListener("generateSchedules",function(t){g.scheduleGenerationStatus=t,"stale"===t.status&&e.includes("schedule.viewSchedule")&&g.generateAndViewSchedules()}),n.registerAddSavedScheduleListener(function(e){g.savedSchedules.push(e)}),n.registerDropSavedScheduleIdListener(function(e){g.savedSchedules.remove(e)})}return e.prototype=Object.create(o.prototype),{controller:["$state","$window","scheduleFactory",e],controllerAs:"dvm",templateUrl:"html/generate_schedules.partial.html"}}var i=e("../models/time"),o=e("./_base.controller");angular.module("berkeleyScheduler").directive("bsGenerateSchedules",[r])},{"../models/time":25,"./_base.controller":1}],9:[function(e,t,n){function r(e,t,n,r,o,s,a){a.pageTrack("/schedule/generate?{}".replace("{}",n(r))),i.call(this,e,t,s);var u=this;u.scheduleGenerationStatus=s.getScheduleGenerationStatus(),s.registerScheduleGenerationStatusListener("generatingSchedules",function(t){u.scheduleGenerationStatus=t,"done"===u.scheduleGenerationStatus.status&&e.includes("schedule.generatingSchedules")&&u.goToState("schedule.viewSchedule",{scheduleId:d||s.getCurrScheduleId()})});var c=o.defer(),l=r.scheduleGroupId,d=r.startScheduleId;l?c.resolve(s.setCurrentScheduleGroupById(l)):d&&c.resolve(s.setCurrentScheduleGroupByScheduleIdQ(d)),c.promise.then(function(){s.generateSchedulesQ().then(function(){s.filterAndReorderSchedules()})})}var i=e("./_base.controller");r.prototype=Object.create(i.prototype),angular.module("berkeleyScheduler").controller("GeneratingSchedulesCtrl",["$state","$window","$httpParamSerializer","$stateParams","$q","scheduleFactory","$analytics",r])},{"./_base.controller":1}],10:[function(e,t,n){function r(e,t,n,r){function o(){r.setPreference("showMobUnoptDialog",!s.doNotShowMobUnoptDialog),n.hide()}i.call(this,e,t,r);var s=this;s.doNotShowMobUnoptDialog=!1,s.close=o}var i=e("./_base.controller");r.prototype=Object.create(i.prototype),angular.module("berkeleyScheduler").controller("MobileUnoptimizedDialogCtrl",["$state","$window","$mdDialog","scheduleFactory",r])},{"./_base.controller":1}],11:[function(e,t,n){"use strict";function r(e,t,n){function r(e){if(e in a){var r=t.defer();return r.resolve(a[e]),r.promise}return c.then(function(t){return t[e]}).then(function(t){return n.getCoursesQBySubjectAreaCode(t[0]).then(function(n){for(var r=t[1],i=0;i<n.length;i++)if(n[i].courseNumber===r){var o=n[i];return a[e]=o,o}})})}function i(e){if(e in a){var n=t.defer();return n.resolve(a[e]),n.promise}return u.then(function(t){return t[e]}).then(r)}var a={},u=e.get(o).then(function(e){return e.data}),c=e.get(s).then(function(e){return e.data});return{getCourseQBy1arySectionId:r,getCourseQBy2arySectionId:i}}var i="data/final/fa16/indices/{}.json",o=i.replace("{}","2ary-to-1ary-section-id"),s=i.replace("{}","1ary-section-id-to-subject-area");angular.module("berkeleyScheduler").factory("reverseLookup",["$http","$q","courses",r])},{}],12:[function(e,t,n){angular.module("berkeleyScheduler").run(["$window","$state","$rootScope","$mdDialog","$mdMedia","$templateRequest","scheduleFactory",function(e,t,n,r,i,o,s){function a(e){return Math.max(e.offsetHeight,e.clientHeight)}function u(){l&&h&&(c=a(document.body),d=a(l),d>c?h.style["min-height"]=d:h.style["min-height"]=null)}n.$state=t;var c=null,l=null,d=null,h=null;n.$on("$viewContentLoaded",function(){l=l||document.getElementById("left-pane"),h=h||document.getElementById("right-pane"),u()}),e.addEventListener("resize",u);var f=s.getPreferences().showMobUnoptDialog;f&&i("xs")&&r.show({templateUrl:"html/mobile_unoptimized.dialog.html",controller:"MobileUnoptimizedDialogCtrl",controllerAs:"vm",parent:angular.element(document.body),clickOutsideToClose:!0}),o("svg/final/sprite.defs.svg")}])},{}],13:[function(e,t,n){function r(e,t,n,r){function g(e,t){for(var n="",r=0;r<t;r++)n+=e[Math.floor(Math.random()*e.length)];return n}function y(){var e=n.get(l);return void 0===e&&(e=g(u,10),n.put(l,e,{expires:Ce})),e}function v(){var e=n.getObject(d);return void 0===e&&Ie&&(e=[Ie],n.putObject(d,Ee,{expires:Ce})),e}function S(){var e=h.replace("{}",Ie),t=n.getObject(e)||{};return void 0===t.showMobUnoptDialog&&(t.showMobUnoptDialog=!0),t}function T(){var e=h.replace("{}",Ie);n.putObject(e,De)}function w(){var e=m.replace("{}",Ie),t=n.getObject(e)||{};if(t.showSavedSchedules=t.showSavedSchedules||!1,t.showOptions=t.showOptions||!1,t.minimizeGaps=t.minimizeGaps||!1,t.maximizeGaps=t.maximizeGaps||!1,t.minimizeNumberOfDays=t.minimizeNumberOfDays||!1,t.maximizeNumberOfDays=t.maximizeNumberOfDays||!1,t.preferMornings=t.preferMornings||!1,t.preferAfternoons=t.preferAfternoons||!1,t.preferEvenings=t.preferEvenings||!1,t.preferNoTimeConflicts=t.preferNoTimeConflicts||!1,t.dayStartTime){var r=t.dayStartTime;t.dayStartTime=new i(r.hours,r.minutes)}else t.dayStartTime=null;if(t.dayEndTime){var r=t.dayEndTime;t.dayEndTime=new i(r.hours,r.minutes)}else t.dayEndTime=null;return void 0===t.noTimeConflicts&&(t.noTimeConflicts=!0),t.showFinalsSchedule=t.showFinalsSchedule||!1,t}function A(){var e=m.replace("{}",Ie);n.putObject(e,qe)}function b(){var e=f.replace("{}",Ie),t=n.getObject(e);t&&t.forEach(function(e){Ae.push(r.getCourseQBy1arySectionId(e.id).then(function(t){t.selected=void 0===e.selected||e.selected,t.sections.forEach(function(t){e.unselectedSections.indexOf(t.id)>=0&&(t.selected=!1)}),j(t)}))})}function C(){var e=[];for(var t in Oe){var r=[],i=[];Oe[t].sections.forEach(function(e){e.selected?r.push(e.id):i.push(e.id)}),e.push({id:t,selected:Oe[t].selected,selectedSections:r,unselectedSections:i})}var o=f.replace("{}",Ie);n.putObject(o,e,{expires:Ce})}function I(){var e=p.replace("{}",Ie),t=n.getObject(e);t&&t.forEach(function(e){Q(e).then(function(e){me(e)})})}function E(){var e=p.replace("{}",Ie);n.putObject(e,Be.map(function(e){return e.id}),{expires:Ce})}function D(){return angular.copy(De)}function O(e,t){De[e]=t,T()}function M(){return we}function N(){we=!0,be.forEach(function(e){e(we)})}function F(e){be.push(e)}function B(){return ke=ke||new a.Stale,"stale"===ke.status}function R(e){void 0===e&&(e=!0),e&&(Object.keys(Ue).forEach(function(e){Ue[e]=!0}),X(new a.Stale)),C()}function L(){var e=[];for(var t in Oe)e.push(Oe[t]);return e}function x(t){if(Oe.hasOwnProperty(t))return e.when(Oe[t]);var n=r.getCourseQBy2arySectionId(t);return n.then(P),n}function j(e){return!Oe.hasOwnProperty(e.id)&&(Oe[e.id]=e,e.add(),e.sections.forEach(function(e){Me[e.id]=e}),R(!0),Ne.forEach(function(t){t(e)}),!0)}function P(e){var t=j(e);return t&&(e.selected=!0,C()),t}function U(e){return!!Oe.hasOwnProperty(e.id)&&(delete Oe[e.id],e.drop(),e.sections.forEach(function(e){delete Me[e.id]}),R(!0),Fe.forEach(function(t){t(e)}),!0)}function G(e){var t=U(e);return t&&C(),t}function k(e){Ne.push(e)}function z(e){Fe.push(e)}function $(){Ve=Pe.map(function(e){return je[e].length}).reduce(function(e,t){return e+t},0)}function _(){return null===Ge&&(Ge=t(function(){function n(e){u+=e,X(new a.Generating(u,s))}function r(){return t(function(){if(Ue[i])return Ge=null,o.reject(),void delete Ue[i];for(var e=0;e<l;){if(null==d)return u+=e,Ge=null,o.resolve(),void delete Ue[i];h=d.getTimeFootprint(),je.hasOwnProperty(h)||(je[h]=[]),je[h].push(d.id),e++,d=xe.nextSchedule()}return n(e),r()})}var i=g(c,4);Ue[i]=!1,je={};var o=e.defer(),s=xe.getTotalNumSchedules(),u=0,l=128,d=xe.nextSchedule(),h=null;return R(!1),n(0),r(),o.promise.then(function(){Pe=Object.keys(je),$(),ue(!0)})}).then(function(){Ge=null})),Ge}function H(){if(!B()){Pe=Object.keys(je),X(new a.FilteringAndReordering(Ve,(!0))),Object.keys(Qe).forEach(function(e){if(qe[e]){var t=Qe[e];Pe=Pe.filter(function(e){return t(e)})}}),X(new a.FilteringAndReordering(Ve,(!1)));var e,t=Object.keys(Ye).filter(function(e){return qe[e]}),n={};Pe.sort(function(r,i){return n.hasOwnProperty(r)||(e=0,t.forEach(function(t){e+=Ye[t](r)}),n[r]=e),n.hasOwnProperty(i)||(e=0,t.forEach(function(t){e+=Ye[t](i)}),n[i]=e),n[i]-n[r]}),_e=0,He=0,We=0,$(),Ve>0?X(new a.Done(Ve)):(X(new a.Failed),W()),ue(!0)}}function W(){if(xe&&xe.getTotalNumSchedules()<=0){var e=xe.courses;if(e.length<=0)return void X(new a.Failed("No classes were selected."));for(var t=0;t<e.length;t++)for(var n=e[t],r=0;r<n.sectionTypes.length;r++){var i=n.getSectionsByType(n.sectionTypes[r]).filter(function(e){return e.selected});if(i.length<=0)return void X(new a.Failed("No sections of type "+n.sectionTypes[r]+" were selected for "+n.getName()+"."))}}var o=Object.keys(je);return o=o.filter(function(e){return Qe.noTimeConflicts(e)}),o.length<=0?void X(new a.Failed("Schedules without time conflicts could not be found.")):(o=o.filter(function(e){return Qe.dayStartTime(e)}).filter(function(e){return Qe.dayEndTime(e)}),void(o.length<=0&&X(new a.Failed("No schedules were found with all classes within the selected start and end time of day. Change your Scheduling Options, add more sections to your existing classes, or check for a different set of classes. "))))}function V(e,t){(t||null===xe||e.id!==xe.id)&&(xe=e)}function q(){if(null===xe||B()){var e=Object.keys(Oe).map(function(e){return Oe[e]}).filter(function(e){return e.selected});V(new s(Ie,e),!0)}return xe.id}function Y(t){if(null===xe||xe.id!==s.normalizeId(t)){var n=s.getUserIdFromId(t),i=s.getCourseIdsFromId(t),o=[],a=[];return i.forEach(function(e){var t=Oe[e];t?o.push(t):a.push(r.getCourseQBy1arySectionId(e).then(function(e){o.push(e),P(e)}))}),e.all(a).then(function(){Object.keys(Oe).forEach(function(e){Oe[e].selected=i.indexOf(parseInt(e))>=0}),V(new s(n,o),!1)})}}function Q(t){var n=le(t);if(null!==n)return e.when(n);var i=o.getUserIdFromId(t),s=o.getSectionIdsFromId(t),a=[],u=[];return s.forEach(function(e){if(Me.hasOwnProperty(e)){var t=Me[e];a.push(t)}else u.push(r.getCourseQBy2arySectionId(e).then(function(t){for(var n=0;n<t.sections.length;n++){var r=t.sections[n];if(r.id===e){a.push(r);break}}}))}),e.all(u).then(function(){return new o(i,a)})}function J(t){if(null!==le(t))return e.when();var n=o.getUserIdFromId(t),i=o.getSectionIdsFromId(t),a=[],u=[],c=[];return i.forEach(function(e){if(Me.hasOwnProperty(e)){var t=Me[e];u.push(t),a.push(t.course.id)}else c.push(r.getCourseQBy2arySectionId(e).then(function(t){if(R(!0),a.push(t.id),j(t))t.sections.forEach(function(t){t.id===e?(t.selected=!0,u.push(t)):t.selected=!1});else{t=Oe[t.id];for(var n=0;n<t.sections.length;n++){var r=t.sections[n];if(r.id===e){u.push(r),r.selected=!0;break}}}}))}),e.all(c).then(function(){var e=[];Object.keys(Oe).forEach(function(t){if(a.indexOf(parseInt(t))>=0){var n=Oe[t];n.selected=!0,e.push(n)}else Oe[t].selected=!1}),V(new s(n,e),!1)})}function X(e){ke=e,Object.keys(ze).forEach(function(t){ze[t](e)})}function Z(){return ke||new a.Stale}function K(e,t){ze[e]=t}function ee(e){return je[Pe[e]]||[]}function te(e,t){return ee(e)[t]}function ne(){return te(_e,He)}function re(){var e=Pe.length;if(e<=0)return null;for(var t=_e,n=He-1;n<0;)t=(_e+e-1)%e,n=ee(t).length-1;return te(t,n)}function ie(){var e=Pe.length;if(e<=0)return null;var t=(_e+e-1)%e;return te(t,0)}function oe(){var e=Pe.length;if(e<=0)return null;for(var t=_e,n=He+1;n>=ee(t).length;)t=(_e+1)%e,n=0;return te(t,n)}function se(){var e=Pe.length;if(e<=0)return null;var t=(_e+1)%e;return te(t,0)}function ae(){return{total:Ve,currentIdx:We,firstScheduleId:te(0,0),prevScheduleId:re(),prevFpFirstScheduleId:ie(),nextScheduleId:oe(),nextFpFirstScheduleId:se()}}function ue(e){var t=ae();t.scheduleListChanged=e,Object.keys($e).forEach(function(e){$e[e](t)})}function ce(e,t){$e[e]=t}function le(e){return xe?xe.getScheduleById(e):null}function de(e){if(B())return null;var t=le(e);if(null===t)return t;var n=t.getTimeFootprint();for(We=0,_e=0;_e<Pe.length;_e++){var r=ee(_e);if(Pe[_e]===n){He=r.indexOf(e),We+=He;break}We+=r.length}return We%=Ve,t}function he(){return angular.copy(qe)}function fe(e,t,n){qe.hasOwnProperty(e)&&(qe[e]=t),(void 0===n||n)&&A()}function pe(){return Be.slice()}function me(e){for(var t=0;t<Be.length;t++)if(Be[t].id===e.id)return!1;return Be.push(e),Re.forEach(function(t){t(e)}),!0}function ge(e){var t=me(e);return t&&E(),t}function ye(e){Re.push(e)}function ve(e){for(var t=0;t<Be.length;t++)if(Be[t].id===e.id)return Be.splice(t,1),Le.forEach(function(t){t(e)}),!0;return!1}function Se(e){var t=ve(e);return t&&E(),t}function Te(e){Le.push(e)}var we=!1,Ae=[],be=[],Ce=function(){var e=new Date;return e.setFullYear(e.getFullYear()+1),e}(),Ie=y(),Ee=v(),De=S(),Oe={},Me={},Ne=[],Fe=[],Be=[],Re=[],Le=[],xe=null,je={},Pe=[],Ue={},Ge=null,ke=a.Stale(),ze={},$e={},_e=0,He=0,We=0,Ve=0,qe=w(),Ye={minimizeGaps:function(e){return-Ye.maximizeGaps(e)},maximizeGaps:function(e){var t,n,r,i,s=o.timeFootprints[e],a=0;for(var u in s){var c=s[u];if(c.length>=2)for(n=c[0].meetings[0].endTime.getTotalMinutes(),r=1;r<c.length;r++)t=c[r],n>0&&(i=t.meetings[0].startTime.getTotalMinutes()-n,a+=Math.max(0,i)/60),n=Math.max(n,t.meetings[0].endTime.getTotalMinutes())}return a},minimizeNumberOfDays:function(e){return-Ye.maximizeNumberOfDays(e)},maximizeNumberOfDays:function(e){var t=o.timeFootprints[e],n=0;for(var r in t)t[r].length>0&&(n+=1);return n},preferMornings:function(e){var t=o.timeFootprints[e],n=0,r=0;for(var s in t)for(var a=t[s],u=0;u<a.length;u++)r++,a[u].meetings[0].endTime.compareTo(i.noon)<=0&&n++;return n/r},preferAfternoons:function(e){var t=o.timeFootprints[e],n=0,r=0;for(var s in t)for(var a=t[s],u=0;u<a.length;u++)r++,a[u].meetings[0].startTime.compareTo(i.noon)>=0&&a[u].meetings[0].endTime.compareTo(i.fivePM)<=0&&n++;return n/r},preferEvenings:function(e){var t=o.timeFootprints[e],n=0,r=0;for(var s in t)for(var a=t[s],u=0;u<a.length;u++)r++,a[u].meetings[0].startTime.compareTo(i.fivePM)>=0&&n++;return n/r},preferNoTimeConflicts:function(e){var t,n,r,i=o.timeFootprints[e],s=0,a=0;for(var u in i){var c=i[u];if(a+=c.length,c.length>=2)for(n=c[0].meetings[0].endTime.getTotalMinutes(),r=1;r<c.length;r++)t=c[r],n>0&&t.meetings[0].startTime.getTotalMinutes()<n&&s++,n=Math.max(n,t.meetings[0].endTime.getTotalMinutes())}return-(s/a)}},Qe={noTimeConflicts:function(e){if(!qe.noTimeConflicts)return!0;var t,n,r,i=o.timeFootprints[e];for(var s in i){var a=i[s];if(a.length>=2)for(n=a[0].meetings[0].endTime.getTotalMinutes(),r=1;r<a.length;r++){if(t=a[r],n>0&&t.meetings[0].startTime.getTotalMinutes()<n)return!1;n=Math.max(n,t.meetings[0].endTime.getTotalMinutes())}}return!0},dayStartTime:function(e){if(null==qe.dayStartTime)return!0;var t=o.timeFootprints[e];for(var n in t){var r=t[n];if(r.length>0&&r[0].meetings[0].startTime.compareTo(qe.dayStartTime)<0)return!1}return!0},dayEndTime:function(e){if(null==qe.dayEndTime)return!0;var t=o.timeFootprints[e];for(var n in t)for(var r=t[n],i=0;i<r.length;i++)if(r[i].meetings[0].endTime.compareTo(qe.dayEndTime)>0)return!1;return!0}};return b(),I(),e.all(Ae).then(function(){N()}),{getPreferences:D,setPreference:O,isReady:M,registerSetReadyListener:F,setStale:R,getAllCourses:L,getCourseQById:x,addCourse:P,registerAddCourseListener:k,dropCourse:G,registerDropCourseListener:z,generateSchedulesQ:_,getCurrentScheduleGroupId:q,setCurrentScheduleGroupById:Y,setCurrentScheduleGroupByScheduleIdQ:J,getScheduleQById:Q,getScheduleByIdFromCurrentScheduleGroup:le,getCurrScheduleId:ne,getScheduleGenerationStatus:Z,registerScheduleGenerationStatusListener:K,getCurrScheduleListInfo:ae,registerCurrScheduleListInfoChangeListener:ce,setCurrentScheduleById:de,getSchedulingOptions:he,setSchedulingOption:fe,filterAndReorderSchedules:H,getSavedSchedules:pe,addSavedSchedule:ge,dropSavedSchedule:Se,registerAddSavedScheduleListener:ye,registerDropSavedScheduleIdListener:Te}}var i=e("../models/time"),o=e("../models/schedule"),s=e("../models/scheduleGroup"),a=e("../models/scheduleGenerationStatus"),u="abcdefghijklmnopqrstuvwxyz0123456789",c=u,l="primaryUserId",d="allUserIds",h="{}.preferences",f="{}.addedCourses",p="{}.savedScheduleIds",m="{}.schedulingOptions";angular.module("berkeleyScheduler").factory("scheduleFactory",["$q","$timeout","$cookies","reverseLookup",r])},{"../models/schedule":20,"../models/scheduleGenerationStatus":21,"../models/scheduleGroup":22,"../models/time":25}],14:[function(e,t,n){function r(e){function t(e,t,o,s){function d(){L.showFinalsSchedule=!L.showFinalsSchedule,s.setSchedulingOption("showFinalsSchedule",L.showFinalsSchedule)}function h(e,t){var n=[],r=[[],[],[],[]];for(var i in e){var o=e[i][0].course.finalMeeting,s=o;if(s.meeting&&s.meeting.days[t]){switch(o.meeting.startTime.hours){case 8:r[0].push(s);break;case 11:r[1].push(s);break;case 15:r[2].push(s);break;case 19:r[3].push(s)}n.push(s)}}return r.forEach(function(e){for(var t=e.length,n=0;n<t;n++)e[n].slotIdx=n,e[n].slotLength=t}),n}function f(e){return{top:w(e),left:A(e),height:b(e),width:C(e),"background-color":I(e)}}function p(e){return{top:w(e),height:b(),"background-color":I(e)}}function w(e){switch(e.meeting.startTime.hours){case 8:return 0;case 11:return.25*m;case 15:return.5*m;case 19:return.75*m}}function A(e){return e.slotIdx/e.slotLength*100+"%"}function b(){return m/4}function C(e){return 1/e.slotLength*100+"%"}function I(e){return i.colorCodes[e.course.color]}function E(e){return{top:O(e),left:M(e),height:N(e),width:F(e),"background-color":B(e)}}function D(e){return{top:O(e),height:N(e),"background-color":B(e)}}function O(e){var t=e.startTime.getTotalMinutes()-y;return t/v*g}function M(e){return e.slotIdx/e.group.slots.length*100+"%"}function N(e){var t=e.totalMinutes+1;return t/v*g}function F(e){return 1/e.group.slots.length*100+"%"}function B(e){return i.colorCodes[e.course.color]}function R(e){o.show({templateUrl:"html/export_to_calendar.dialog.html",controller:"ExportToCalendarDialogCtrl",controllerAs:"vm",parent:angular.element(document.body),clickOutsideToClose:!0,escapeToClose:!0,locals:{schedule:e}})}a.call(this,e,t,s);var L=this,x=s.getSchedulingOptions();L.showFinalsSchedule=x.showFinalsSchedule,L.finalMeetings=l,L.hours=n,L.halfHours=r,L.days=u,L.dayDates=c,L.finalColorOpacity=S,L.sectionColorOpacity=T,L.currScheduleListInfo=s.getCurrScheduleListInfo(),L.addSavedSchedule=s.addSavedSchedule,L.exportScheduleToCalendar=R,L.toggleFinalsSchedule=d,L.getFinalsForDay=h,L.getFinalStyle=f,L.getFinalHoverStyle=p,L.getSectionViewStyle=E,L.getSectionViewHoverStyle=D,s.registerCurrScheduleListInfoChangeListener("scheduleDisplay",function(e){L.currScheduleListInfo=e,e.scheduleListChanged&&L.goToState("schedule.viewSchedule",{scheduleId:e.firstScheduleId})})}for(var n=[],r=[],u=["Monday","Tuesday","Wednesday","Thursday","Friday"],c={Monday:"12/12",Tuesday:"12/13",Wednesday:"12/14",Thursday:"12/15",Friday:"12/16"},l=[new o(new s(8,0),new s(11,0),{}),new o(new s(11,30),new s(14,30),{}),new o(new s(15,0),new s(18,0),{}),new o(new s(19,0),new s(22,0),{})],d=8,h=24,f=h-d,p=d;p<h;p++)n.push(new s(p,0)),r.push(new s(p,0)),r.push(new s(p,30));var m=165,g=600,y=new s(d,0).getTotalMinutes(),v=new s(f,0).getTotalMinutes(),S="0.6",T="0.6";return t.prototype=Object.create(a.prototype),{scope:{schedule:"="},controller:["$state","$window","$mdDialog","scheduleFactory",t],controllerAs:"vm",templateUrl:"html/schedule_display.partial.html"}}var i=e("../models/course"),o=e("../models/meeting"),s=e("../models/time"),a=e("./_base.controller");angular.module("berkeleyScheduler").directive("bsScheduleDisplay",["scheduleFactory",r])},{"../models/course":17,"../models/meeting":19,"../models/time":25,"./_base.controller":1}],15:[function(e,t,n){function r(e,t,n,r,o){o.pageTrack("/schedule/course/{}".replace("{}",n.id)),i.call(this,e,t,r);var s=this;s.selectedCourse=null,r.getCourseQById(n.id).then(function(e){s.selectedCourse=e})}var i=e("./_base.controller");r.prototype=Object.create(i.prototype),angular.module("berkeleyScheduler").controller("ViewCourseCtrl",["$state","$window","$stateParams","scheduleFactory","$analytics",r])},{"./_base.controller":1}],16:[function(e,t,n){function r(e,t,n,r,o){o.pageTrack("/schedule/{}".replace("{}",n.scheduleId)),i.call(this,e,t,r);var s=this,a=n.scheduleId,u="false"!==n.noTimeConflicts;r.setSchedulingOption("noTimeConflicts",u),
s.selectedSchedule=null,a&&(s.selectedSchedule=r.setCurrentScheduleById(a)),null===s.selectedSchedule&&s.goToState("schedule.generatingSchedules",{startScheduleId:a})}var i=e("./_base.controller");r.prototype=Object.create(i.prototype),angular.module("berkeleyScheduler").controller("ViewScheduleCtrl",["$state","$window","$stateParams","scheduleFactory","$analytics",r])},{"./_base.controller":1}],17:[function(e,t,n){"use strict";function r(e){void 0===e.displayName&&console.log(e);var t=e.displayName.split(" ",2);this.department=t[0],this.courseNumber=t[1],this.title=e.title,this.description=e.description,this.id=parseInt(e.id),this.units=e.units;var n=e.meetings;this.meetings=n.map(o.parse),this.finalMeeting=new i(this),this.sectionTypes=[],this.sections=e.sections.map(function(e){var t=new s(e,this);return this.sectionTypes.indexOf(t.type)<0&&this.sectionTypes.push(t.type),t},this),this.selected=!1,this.color=null,this.view=!1}var i=e("./final"),o=e("./meeting"),s=e("./section");r.colorCodes={red:"#f44336",pink:"#e91e63",purple:"#9c27b0","deep-purple":"#673ab7",indigo:"#3f51b5",blue:"#2196f3","light-blue":"#03a9f4",cyan:"#00bcd4",teal:"#009688",green:"#4caf50","light-green":"#8bc34a",amber:"#ffc107",orange:"#ff9800","deep-orange":"#ff5722",brown:"#795548","blue-grey":"#607d8b"},r.unregisteredColors=Object.keys(r.colorCodes),r.registeredColors=[],r.courseColors={},r.getRegisteredColor=function(){var e=r.unregisteredColors.length;if(0==e)return r.registeredColors[Math.floor(Math.random()*r.registeredColors.length)];var t=Math.floor(Math.random()*e),n=r.unregisteredColors.splice(t,1)[0];return r.registeredColors.push(n),n},r.unRegisterColor=function(e){r.registeredColors.remove(e),r.unregisteredColors.push(e)},r.parse=function(e){return new r(e)},r.prototype.getName=function(){return this.department+" "+this.courseNumber},r.prototype.getSectionsByType=function(e){return this.sections.filter(function(t){return t.type===e})},r.prototype.add=function(){r.courseColors.hasOwnProperty(this.id)||(r.courseColors[this.id]=r.getRegisteredColor()),this.color=r.courseColors[this.id]},r.prototype.drop=function(){this.selected=!1,delete r.courseColors[this.id],r.unRegisterColor(this.color)},t.exports=r},{"./final":18,"./meeting":19,"./section":24}],18:[function(e,t,n){"use strict";function r(e){if(this.course=e,this.meeting=r.getSubjectCourseToFinalSection(e),!this.meeting&&e.meetings.length){var t=e.meetings[0].days;t.Saturday||t.Sunday?this.meeting=r.getSatSunCourseTimeToFinalSection(e):t.Monday||t.Wednesday||t.Friday?this.meeting=r.getMTWRFCourseTimeToFinalSection(e):(t.Tuesday||t.Thursday)&&(this.meeting=r.getTRCourseTimeToFinalSection(e))}}var i=e("./meeting"),o=e("./time");r.meetings={Monday811AM:new i(new o(8,0),new o(11,0),i.daysFromAbrvs("M")),Monday1130230PM:new i(new o(11,30),new o(14,30),i.daysFromAbrvs("M")),Monday36PM:new i(new o(15,0),new o(18,0),i.daysFromAbrvs("M")),Monday710PM:new i(new o(19,0),new o(22,0),i.daysFromAbrvs("M")),Tuesday811AM:new i(new o(8,0),new o(11,0),i.daysFromAbrvs("T")),Tuesday1130230PM:new i(new o(11,30),new o(14,30),i.daysFromAbrvs("T")),Tuesday36PM:new i(new o(15,0),new o(18,0),i.daysFromAbrvs("T")),Tuesday710PM:new i(new o(19,0),new o(22,0),i.daysFromAbrvs("T")),Wednesday811AM:new i(new o(8,0),new o(11,0),i.daysFromAbrvs("W")),Wednesday1130230PM:new i(new o(11,30),new o(14,30),i.daysFromAbrvs("W")),Wednesday36PM:new i(new o(15,0),new o(18,0),i.daysFromAbrvs("W")),Wednesday710PM:new i(new o(19,0),new o(22,0),i.daysFromAbrvs("W")),Thursday811AM:new i(new o(8,0),new o(11,0),i.daysFromAbrvs("R")),Thursday1130230PM:new i(new o(11,30),new o(14,30),i.daysFromAbrvs("R")),Thursday36PM:new i(new o(15,0),new o(18,0),i.daysFromAbrvs("R")),Thursday710PM:new i(new o(19,0),new o(22,0),i.daysFromAbrvs("R")),Friday811AM:new i(new o(8,0),new o(11,0),i.daysFromAbrvs("F")),Friday1130230PM:new i(new o(11,30),new o(14,30),i.daysFromAbrvs("F")),Friday36PM:new i(new o(15,0),new o(18,0),i.daysFromAbrvs("F")),Friday710PM:new i(new o(19,0),new o(22,0),i.daysFromAbrvs("F"))},r.elementaryForeignLangListing={AFRICAM:["7A","7B","8A","8B","9A","9B","10A","10B","11A","11B","13A","13B","15A","15B","30A","30B","31A","31B"],ARABIC:["100A","100B","1A","1B","20A","20B"],ARMENI:["101A","101B","1A","1B"],BENGLA:["101A","101B","1A","1B"],BERMESE:["1A","1B"],BOSCRSR:["117A","117B","27A","27B"],BULGARI:["118A","118B","28A","28B"],CATALAN:["101A"],CELTIC:["15","16","85","86","102A","102B","105A","144A","144B","145A","145B"],CHINESE:["1A","1B","1X","1Y","10A","10B","10X","10Y","100A","100B","100XA","100XB"],"COMP LIT":["112A","112B"],CUNEIF:["100A","100B","102A","102B","106A","106B"],CZECH:["116A","116B","26A","26B"],DANISH:["1A","1B"],DUTCH:["1","2","3"],EGYPT:["100A","100B","101A","101B","102A","102B"],"EURA ST":["289","2A","2B"],FILIPN:["100A","100B","101A","101B","1A","1B"],FINNISH:["102A","102B","1A","1B"],FRENCH:["1","2","3","4"],GERMAN:["1","101","102","110","2","3","4"],GREEK:["1","2"],HEBREW:["100A","100B","106A","106B","1A","1B","20A","20B"],"HIN-URD":["1A","1B","2A","2B","100A","100B","103A","103B","104A","104B"],HUNGARI:["1A","1B"],ICELAND:["1A","1B"],IRANIAN:["110A","110B"],ITALIAN:["1","1S","2","3","4"],JAPAN:["100A","100B","100X","10A","10B","10X","1A","1B"],JEWISH:["101"],KHMER:["100A","100B","101A","101B","1A","1B"],KOREAN:["1A","1AX","1B","1BX","10A","10AX","10B","100A","10BX","100AX","100B","100BX"],LATIN:["1","2"],LINGUIS:["1A","1B","2A"],"MALAY/I":["100A","100B","1A","1B"],MONGOLN:["1A","1B"],NORWEGN:["1A","1B"],PERSIAN:["100A","100B","1A","1B","20A","20B"],POLISH:["115A","155B","25A","25B"],PORTUG:["101A","102","11","12","26","8"],PUNJABI:["100A","100B","1A","1B"],ROMANI:["102A","102B","1A","1B"],RUSSIAN:["1","103A","103B","2","3","4","6A","6B"],"S,SEASN":["1A","1B"],SANSKR:["100A","100B","101A","101B","101C"],SCANDIN:["101A","101B"],SEMETIC:["100A","100B","205A","205B"],SPANISH:["1","12","2","21","22","26","3","4","8"],SWEDISH:["1A","1B"],TAMIL:["101A","101B","1A","1B"],TELUGU:["1A","1B"],THAI:["100A","100B","101A","101B","1A","1B"],TIBETAN:["10A","10B","1A","1B"],TURKISH:["100A","100B","10A","1A","1B"],VIETNMS:["100A","100B","101A","101B","1A","1B"],YIDDISH:["101"]},r.getSubjectCourseToFinalSection=function(e){if("ECON"===e.department){if("1"===e.courseNumber||"100B"===e.courseNumber)return r.meetings.Tuesday1130230PM}else if("CHEM"===e.department){if("1A"===e.courseNumber||"1B"===e.courseNumber||"3A"===e.courseNumber||"3B"===e.courseNumber||"4A"===e.courseNumber||"4B"===e.courseNumber)return r.meetings.Monday36PM}else if(e.department in r.elementaryForeignLangListing&&r.elementaryForeignLangListing[e.department].indexOf(e.courseNumber)>=0)return r.meetings.Wednesday1130230PM},r.getMTWRFCourseTimeToFinalSection=function(e){switch(e.meetings[0].startTime.hours){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:return null;case 8:return r.meetings.Monday710PM;case 9:return r.meetings.Tuesday710PM;case 10:return r.meetings.Monday811AM;case 11:return r.meetings.Monday1130230PM;case 12:return r.meetings.Friday1130230PM;case 13:return r.meetings.Wednesday710PM;case 14:return r.meetings.Thursday36PM;case 15:return r.meetings.Tuesday710PM;case 16:return r.meetings.Thursday811AM;case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:return r.meetings.Friday36PM}},r.getTRCourseTimeToFinalSection=function(e){switch(e.meetings[0].startTime.hours){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:return null;case 8:return r.meetings.Wednesday36PM;case 9:return r.meetings.Tuesday36PM;case 10:return r.meetings.Friday36PM;case 11:return r.meetings.Wednesday811AM;case 12:case 13:return r.meetings.Friday811AM;case 14:return r.meetings.Tuesday811AM;case 15:case 16:return r.meetings.Friday710PM;case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:return r.meetings.Thursday1130230PM}},r.getSatSunCourseTimeToFinalSection=function(){return r.meetings.Wednesday36PM},t.exports=r},{"./meeting":19,"./time":25}],19:[function(e,t,n){"use strict";function r(e,t,n,r,i){this.startTime=e,this.endTime=t,this.days=n,this.location=r,this.instructors=i}var i=e("./time.js");r.parse=function(e){if(e.location)var t=e.location.description||null;if(null===e.startTime||null===e.endTime)return new r(null,null,e.days,t,e.instructors);var n=e.startTime.split(":"),o=new i(parseInt(n[0]),parseInt(n[1])),s=e.endTime.split(":"),a=new i(parseInt(s[0]),parseInt(s[1]));return new r(o,a,e.days,t,e.instructors)},r.dayAbrvExpansions={M:"Monday",T:"Tuesday",W:"Wednesday",R:"Thursday",F:"Friday"},r.dayAbrvs=[["Monday","M"],["Tuesday","T"],["Wednesday","W"],["Thursday","R"],["Friday","F"]],r.daysFromAbrvs=function(e){for(var t={Monday:!1,Tuesday:!1,Wednesday:!1,Thursday:!1,Friday:!1},n=0;n<e.length;n++)t[r.dayAbrvExpansions[e[n]]]=!0;return t},r.prototype.getTotalMinutes=function(){return this.endTime.getTotalMinutes()-this.startTime.getTotalMinutes()},r.prototype.toString=function(){var e="";return r.dayAbrvs.forEach(function(t){this.days[t[0]]&&(e+=t[1])},this),null==this.startTime||null==this.endTime?e:e+" "+this.startTime.toString()+" - "+this.endTime.toString()},t.exports=r},{"./time.js":25}],20:[function(e,t,n){"use strict";function r(e,t){this.courses={},this.sectionsByDay={Monday:[],Tuesday:[],Wednesday:[],Thursday:[],Friday:[]},this.sectionGroupsByDay={};var n=[];t.forEach(function(e){n.push(e.id);var t=e.course.id;if(this.courses.hasOwnProperty(t)||(this.courses[t]=[]),this.courses[t].push(e),e.meetings.length>0)for(var r in e.meetings[0].days)e.meetings[0].days[r]&&this.sectionsByDay[r].push(e)},this);for(var i in this.sectionsByDay)this.sectionsByDay[i].sort(function(e,t){return e.meetings[0].startTime.compareTo(t.meetings[0].startTime)});this.id=r.generateId([e].concat(n)),this.selected=!0}var i=e("./meeting"),o=e("./scheduleSectionGroup");r.timeFootprints={},r.prototype.getTimeFootprint=function(){var e=i.dayAbrvs.map(function(e){return e[1]+this.sectionsByDay[e[0]].map(function(e){return e.meetings[0].startTime.getTotalMinutes()+"-"+e.meetings[0].endTime.getTotalMinutes()}).reduce(function(e,t){return e+"."+t},"")},this).reduce(function(e,t){return e+"|"+t},"");return r.timeFootprints[e]=this.sectionsByDay,e},r.prototype.getSectionGroupsForDay=function(e){return this.sectionGroupsByDay.hasOwnProperty(e)||(this.sectionGroupsByDay[e]=this._generateSectionGroupsForDay(e)),this.sectionGroupsByDay[e]},r.prototype._generateSectionGroupsForDay=function(e){if(!this.sectionsByDay[e].length)return[];for(var t=this.sectionsByDay[e],n=[],r=new o(t[0],e),i=1;i<t.length;i++){var s=t[i];r.hasOverlap(s)?r.add(s):(n.push(r),r=new o(s,e))}return n.push(r),n},r.generateId=function(e){var t=e.shift();return e=e.map(function(e){return parseInt(e)}),e.sort(function(e,t){return e-t}),e.unshift(t),e.join(".")},r.normalizeId=function(e){return null===e?null:r.generateId(e.split("."))},r.getUserIdFromId=function(e){return e.split(".")[0]},r.getSectionIdsFromId=function(e){return e.split(".").slice(1).map(function(e){return parseInt(e)})},t.exports=r},{"./meeting":19,"./scheduleSectionGroup":23}],21:[function(e,t,n){"use strict";function r(e){this.status=e}function i(){r.call(this,"stale")}function o(e,t){r.call(this,"generating"),this.numGenerated=e,this.total=t}function s(e,t){r.call(this,"filteringAndReordering"),this.total=e,this.filtering=t}function a(e){r.call(this,"done"),this.total=e}function u(e){r.call(this,"failed"),this.reason=e}i.prototype=Object.create(r.prototype),o.prototype=Object.create(r.prototype),s.prototype=Object.create(r.prototype),a.prototype=Object.create(r.prototype),u.prototype=Object.create(r.prototype);var c={Stale:i,Generating:o,FilteringAndReordering:s,Done:a,Failed:u};t.exports=c},{}],22:[function(e,t,n){"use strict";function r(e,t){this.id=r.generateId(e,t),this.userId=e,this.courses=t,this.sections={},this.sectionChoices=[],this.courses.forEach(function(e){e.sectionTypes.forEach(function(t){this.sectionChoices.push(e.getSectionsByType(t).map(function(e){return this.sections[e.id]=e,e},this).filter(function(e){return e.selected},this))},this)},this),this.resetIterator()}var i=e("./schedule");r.generateId=function(e,t){var n=t.map(function(e){return e.id});return n.unshift(e),i.generateId(n)},r.normalizeId=function(e){return null===e?null:i.generateId(e.split("."))},r.getCourseIdsFromId=function(e){return i.getSectionIdsFromId(e)},r.getUserIdFromId=function(e){return i.getUserIdFromId(e)},r.prototype._nextScheduleSectionIds=function(){return this._updateIterator()?this.sectionChoices.map(function(e,t){return e[this.sectionChoiceIterator[t]]},this):[]},r.prototype.getTotalNumSchedules=function(){return this.sectionChoices.length<=0?0:this.sectionChoices.map(function(e){return e.length}).reduce(function(e,t){return e*t},1)},r.prototype.nextSchedule=function(){var e=this._nextScheduleSectionIds();return this._getScheduleWithSections(e)},r.prototype.nextScheduleId=function(){var e=this._nextScheduleSectionIds().map(function(e){return e.id});return 0===e.length?null:i.generateId([this.userId].concat(e))},r.prototype.getScheduleById=function(e){var t=!0,n=i.getSectionIdsFromId(e);if(n.length!=this.sectionChoices.length)return null;var r=n.map(function(e){var n=this.sections[e];return n||(t=!1),n},this);return t?this._getScheduleWithSections(r):null},r.prototype.resetIterator=function(){this.sectionChoiceIterator=this.sectionChoices.map(function(){return 0}),this.sectionChoiceIterator[0]=-1},r.prototype._updateIterator=function(){if(0===this.getTotalNumSchedules())return!1;for(var e=0;e<this.sectionChoiceIterator.length;){if(this.sectionChoiceIterator[e]++,this.sectionChoiceIterator[e]<this.sectionChoices[e].length)return!0;this.sectionChoiceIterator[e]=0,e++}return!1},r.prototype._getScheduleWithSections=function(e){return 0===e.length?null:new i(this.userId,e)},t.exports=r},{"./schedule":20}],23:[function(e,t,n){"use strict";function r(e,t,n,r){this.group=e,this.course=t.course,this.type=t.type,this.startTime=t.meetings[0].startTime,this.endTime=t.meetings[0].endTime,this.location=t.meetings[0].location,this.totalMinutes=t.meetings[0].getTotalMinutes(),this.day=n,this.slotIdx=void 0!==r?r:-1}function i(e,t){this.day=t,this.slots=[[new r(this,e,t,0)]]}i.SectionView=r,i.prototype.hasOverlap=function(e){for(var t=new r(this,e,this.day),n=0;n<this.slots.length;n++){var i=this.slots[n];if(i[i.length-1].endTime.compareTo(t.startTime)>0)return!0}return!1},i.prototype.add=function(e){for(var t=new r(this,e,this.day),n=0;n<this.slots.length;n++){var i=this.slots[n];if(i[i.length-1].endTime.compareTo(t.startTime)<=0)return i.push(t),void(t.slotIdx=n)}this.slots.push([t]),t.slotIdx=this.slots.length-1},i.prototype.getSectionViews=function(){return this.slots.reduce(function(e,t){return e.concat(t)},[])},t.exports=i},{}],24:[function(e,t,n){"use strict";function r(e,t){angular.extend(this,e),this.id=parseInt(this.id);var n=this.meetings;this.meetings=n.map(i.parse),delete this.time,this.course=t,this.selected=!0}var i=e("./meeting");t.exports=r},{"./meeting":19}],25:[function(e,t,n){"use strict";function r(e,t){(e<0||e>24)&&console.error("invalid hours",e),this.hours=e,(t<0||t>59)&&console.error("invalid minutes",t),this.minutes=t}r.parse=function(e){return("string"==typeof e||e instanceof String)&&(e=JSON.parse(e)),new r(e.hours,e.minutes)},r.noon=new r(12,0),r.fivePM=new r(17,0),r.prototype.add=function(e){return new r(this.hours+e.hours,this.minutes+e.minutes)},r.prototype.compareTo=function(e){return this.getTotalMinutes()-e.getTotalMinutes()},r.prototype.toString=function(){var e=this.hours%24,t="AM";e>=12&&(t="PM"),e%=12,0==e&&(e=12);var n=e.toString();return 0!=this.minutes&&(n+=":"+this.minutes.toString()),n+t},r.prototype.getTotalMinutes=function(){return 60*this.hours+this.minutes},t.exports=r},{}],26:[function(e,t,n){},{}],27:[function(e,t,n){var r=r||function(e){"use strict";if(!("undefined"==typeof e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},s=/constructor/i.test(e.HTMLElement),a=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},c="application/octet-stream",l=4e4,d=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,l)},h=function(e,t,n){t=[].concat(t);for(var r=t.length;r--;){var i=e["on"+t[r]];if("function"==typeof i)try{i.call(e,n||e)}catch(o){u(o)}}},f=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},p=function(t,u,l){l||(t=f(t));var p,m=this,g=t.type,y=g===c,v=function(){h(m,"writestart progress write writeend".split(" "))},S=function(){if((a||y&&s)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=a?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;"),n=e.open(t,"_blank");n||(e.location.href=t),t=void 0,m.readyState=m.DONE,v()},r.readAsDataURL(t),void(m.readyState=m.INIT)}if(p||(p=n().createObjectURL(t)),y)e.location.href=p;else{var i=e.open(p,"_blank");i||(e.location.href=p)}m.readyState=m.DONE,v(),d(p)};return m.readyState=m.INIT,i?(p=n().createObjectURL(t),void setTimeout(function(){r.href=p,r.download=u,o(r),v(),d(p),m.readyState=m.DONE})):void S()},m=p.prototype,g=function(e,t,n){return new p(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=f(e)),navigator.msSaveOrOpenBlob(e,t)}:(m.abort=function(){},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,g)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof t&&t.exports?t.exports.saveAs=r:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define([],function(){return r})},{}],28:[function(e,t,n){"use strict";t.exports={},t.exports.formatDate=function(e,t,n){function r(e){return(e<10?"0":"")+e}var i;return i=e.getUTCFullYear(),i+=r(e.getUTCMonth()+1),i+=r(e.getUTCDate()),t||(i+="T",i+=r(e.getUTCHours()),i+=r(e.getUTCMinutes()),i+=r(e.getUTCSeconds()),n||(i+="Z")),i},t.exports.formatDateTZ=function(e,n,r){var i="",o=r.floating;return r.timezone&&(i=";TZID="+r.timezone,o=!0),e+i+":"+t.exports.formatDate(n,!1,o)},t.exports.escape=function(e){return e.replace(/[\\;,"]/g,function(e){return"\\"+e}).replace(/(?:\r\n|\r|\n)/g,"\\n")},t.exports.duration=function(e){var t="";return e<0&&(t="-",e*=-1),t+="P",e>=86400&&(t+=Math.floor(e/86400)+"D",e%=86400),!e&&t.length>1?t:(t+="T",e>=3600&&(t+=Math.floor(e/3600)+"H",e%=3600),e>=60&&(t+=Math.floor(e/60)+"M",e%=60),e>0?t+=e+"S":t.length<=2&&(t+="0S"),t)},t.exports.toJSON=function(e,t,n){var r={};return n=n||{},n.ignoreAttributes=n.ignoreAttributes||[],n.hooks=n.hooks||{},t.forEach(function(t){if(n.ignoreAttributes.indexOf(t)===-1){var i,o=e[t]();n.hooks[t]&&(o=n.hooks[t](o)),o&&(r[t]=o,Array.isArray(r[t])&&(i=[],r[t].forEach(function(e){i.push(e.toJSON())}),r[t]=i))}}),r}},{}],29:[function(e,t,n){"use strict";var r=function(t,n){var r,i,o,s=["type","trigger","triggerBefore","triggerAfter","repeat","interval","attach","description"];if(!n)throw"`event` option required!";r={types:["display","audio"]},o={type:null,trigger:null,repeat:null,repeatInterval:null,attach:null,description:null},this.type=function(e){if(void 0===e)return o.type;if(!e)return o.type=null,this;if(r.types.indexOf(e)===-1)throw"`type` is not correct, must be either `display` or `audio`!";return o.type=e,this},this.trigger=function(e){if(void 0===e&&o.trigger instanceof Date)return o.trigger;if(void 0===e&&o.trigger)return-1*o.trigger;if(void 0===e)return null;if(!e)return o.trigger=null,this;if(e instanceof Date)return o.trigger=e,this;if("number"==typeof e&&isFinite(e))return o.trigger=-1*e,this;throw"`trigger` is not correct, must be either typeof `Number` or `Date`!"},this.triggerAfter=function(e){return void 0===e?o.trigger:this.trigger("number"==typeof e?-1*e:e)},this.triggerBefore=this.trigger,this.repeat=function(e){if(void 0===e)return o.repeat;if(!e)return o.repeat=null,this;if("number"!=typeof e||!isFinite(e))throw"`repeat` is not correct, must be numeric!";return o.repeat=e,this},this.interval=function(e){if(void 0===e)return o.interval;if(!e)return o.interval=null,this;if("number"!=typeof e||!isFinite(e))throw"`interval` is not correct, must be numeric!";return o.interval=e,this},this.attach=function(e){if(void 0===e)return o.attach;if(!e)return o.attach=null,this;var t=null;if("string"==typeof e)t={uri:e,mime:null};else{if("object"!=typeof e)throw"`attach` needs to be a valid formed string or an object. See https://github.com/sebbo2002/ical-generator#attachstringobject-attach";t={uri:e.uri,mime:e.mime||null}}if(!t.uri)throw"`attach.uri` is empty!";return o.attach={uri:t.uri,mime:t.mime},this},this.description=function(e){return void 0===e?o.description:e?(o.description=e,this):(o.description=null,this)},this.toJSON=function(){var t=e("./_tools.js");return t.toJSON(this,s)},this.generate=function(){var t=e("./_tools.js"),r="BEGIN:VALARM\r\n";if(!o.type)throw"No value for `type` in ICalAlarm given!";if(!o.trigger)throw"No value for `trigger` in ICalAlarm given!";if(r+="ACTION:"+o.type.toUpperCase()+"\r\n",r+=o.trigger instanceof Date?"TRIGGER;VALUE=DATE-TIME:"+t.formatDate(o.trigger)+"\r\n":o.trigger>0?"TRIGGER;RELATED=END:"+t.duration(o.trigger)+"\r\n":"TRIGGER:"+t.duration(o.trigger)+"\r\n",o.repeat&&!o.interval)throw"No value for `interval` in ICalAlarm given, but required for `repeat`!";if(o.repeat&&(r+="REPEAT:"+o.repeat+"\r\n"),o.interval&&!o.repeat)throw"No value for `repeat` in ICalAlarm given, but required for `interval`!";return o.interval&&(r+="DURATION:"+t.duration(o.interval)+"\r\n"),"audio"===o.type&&o.attach&&o.attach.mime?r+="ATTACH;FMTTYPE="+o.attach.mime+":"+o.attach.uri+"\r\n":"audio"===o.type&&o.attach?r+="ATTACH;VALUE=URI:"+o.attach.uri+"\r\n":"audio"===o.type&&(r+="ATTACH;VALUE=URI:Basso\r\n"),"display"===o.type&&o.description?r+="DESCRIPTION:"+t.escape(o.description)+"\r\n":"display"===o.type&&(r+="DESCRIPTION:"+t.escape(n.summary())+"\r\n"),r+="END:VALARM\r\n"};for(i in t)t.hasOwnProperty(i)&&s.indexOf(i)>-1&&this[i](t[i])};t.exports=r},{"./_tools.js":28}],30:[function(e,t,n){"use strict";var r=function(t,n){function i(e){return a("role",e)}function o(e){return a("status",e)}function s(e){return a("type",e)}function a(e,t){if(!t||"string"!=typeof t)throw new Error("Input for `"+e+"` must be a non-empty string. You gave "+t);if(t=t.toUpperCase(),u.allowed[e].indexOf(t)===-1)throw new Error("`"+e+"` must be one of the following: "+u.allowed[e].join(", ")+"!");return t}var u,c,l,d=["name","email","role","status","type","delegatedTo","delegatedFrom","delegatesFrom","delegatesTo"];if(!n)throw"`event` option required!";u={allowed:{role:["REQ-PARTICIPANT","NON-PARTICIPANT"],status:["ACCEPTED","TENTATIVE","DECLINED","DELEGATED"],type:["INDIVIDUAL","GROUP","RESOURCE","ROOM","UNKNOWN"]}},l={name:null,email:null,status:null,role:"REQ-PARTICIPANT",type:null,delegatedTo:null,delegatedFrom:null},this.name=function(e){return void 0===e?l.name:(l.name=e||null,this)},this.email=function(e){return e?(l.email=e,this):l.email},this.role=function(e){return void 0===e?l.role:(l.role=i(e),this)},this.status=function(e){return void 0===e?l.status:e?(l.status=o(e),this):(l.status=null,this)},this.type=function(e){return void 0===e?l.type:e?(l.type=s(e),this):(l.type=null,this)},this.delegatedTo=function(e){return void 0===e?l.delegatedTo:e?(l.delegatedTo=e,l.status="DELEGATED",this):(l.delegatedTo=null,"DELEGATED"===l.status&&(l.status=null),this)},this.delegatedFrom=function(e){return void 0===e?l.delegatedFrom:(l.delegatedFrom=e||null,this)},this.delegatesTo=function(e){var t=e instanceof r?e:n.createAttendee(e);return this.delegatedTo(t),t.delegatedFrom(this),t},this.delegatesFrom=function(e){var t=e instanceof r?e:n.createAttendee(e);return this.delegatedFrom(t),t.delegatedTo(this),t},this.toJSON=function(){var t=e("./_tools.js");return t.toJSON(this,d,{ignoreAttributes:["delegatesTo","delegatesFrom"],hooks:{delegatedTo:function(e){return e instanceof r?e.email():e},delegatedFrom:function(e){return e instanceof r?e.email():e}}})},this.generate=function(){var e="ATTENDEE";if(!l.email)throw"No value for `email` in ICalAttendee given!";return e+=";ROLE="+l.role,l.type&&(e+=";CUTYPE="+l.type),l.status&&(e+=";PARTSTAT="+l.status),l.delegatedTo&&(e+=';DELEGATED-TO="'+(l.delegatedTo instanceof r?l.delegatedTo.email():l.delegatedTo)+'"'),l.delegatedFrom&&(e+=';DELEGATED-FROM="'+(l.delegatedFrom instanceof r?l.delegatedFrom.email():l.delegatedFrom)+'"'),l.name&&(e+=';CN="'+l.name+'"'),e+=":MAILTO:"+l.email+"\r\n"};for(c in t)t.hasOwnProperty(c)&&d.indexOf(c)>-1&&this[c](t[c])};t.exports=r},{"./_tools.js":28}],31:[function(e,t,n){"use strict";var r=function(t){var n,r,i={},o=["domain","prodId","name","description","timezone","ttl","url","events"];n=function(t){var n=e("./_tools.js"),r="";return r="BEGIN:VCALENDAR\r\nVERSION:2.0\r\n",r+="PRODID:-"+i.prodid+"\r\n",i.url&&(r+="URL:"+i.url+"\r\n"),i.name&&(r+="NAME:"+i.name+"\r\n",r+="X-WR-CALNAME:"+i.name+"\r\n"),i.description&&(r+="X-WR-CALDESC:"+i.description+"\r\n"),i.timezone&&(r+="TIMEZONE-ID:"+i.timezone+"\r\n",r+="X-WR-TIMEZONE:"+i.timezone+"\r\n"),i.ttl&&(r+="REFRESH-INTERVAL;VALUE=DURATION:"+n.duration(i.ttl)+"\r\n",r+="X-PUBLISHED-TTL:"+n.duration(i.ttl)+"\r\n"),i.events.forEach(function(e){r+=e.generate(t)}),r+="END:VCALENDAR"},this.setDomain=function(e){return this.domain(e),this},this.domain=function(e){return e?(i.domain=e.toString(),this):i.domain},this.setProdID=function(e){if(!e||"object"!=typeof e)throw"`prodid` is not an object!";try{this.prodId(e)}catch(t){throw t.replace(/`([\w.]+)`/i,"event.$1")}return this},this.prodId=function(e){if(!e)return i.prodid;var t,n=/^\/\/(.+)\/\/(.+)\/\/([A-Z]{1,4})$/;if("string"==typeof e&&n.test(e))return i.prodid=e,this;if("string"==typeof e)throw"`prodid` isn't formated correctly. See https://github.com/sebbo2002/ical-generator#prodidstringobject-prodid";if("object"!=typeof e)throw"`prodid` needs to be a valid formed string or an object!";if(!e.company)throw"`prodid.company` is a mandatory item!";if(!e.product)throw"`prodid.product` is a mandatory item!";return t=(e.language||"EN").toUpperCase(),i.prodid="//"+e.company+"//"+e.product+"//"+t,this},this.setName=function(e){return this.name(e),this},this.name=function(e){return void 0===e?i.name:(i.name=e?e.toString():null,this)},this.description=function(e){return void 0===e?i.description:(i.description=e?e.toString():null,this)},this.setTZ=function(e){return this.timezone(e),this},this.timezone=function(e){return void 0===e?i.timezone:(i.timezone=e?e.toString():null,this)},this.url=function(e){return void 0===e?i.url:(i.url=e||null,this)},this.ttl=function(e){return void 0===e?i.ttl:(i.ttl=parseInt(e,10)||null,this)},this.addEvent=function(t){if(!t||"object"!=typeof t)throw"event is not an object!";if(!t.start)throw"event.start is a mandatory item!";if(!t.summary)throw"event.summary is a mandatory item!";var n,r=e("./event.js");try{n=new r(t,this)}catch(o){throw o.replace(/`([\w.]+)`/i,"event.$1")}return i.events.push(n),this},this.createEvent=function(t){var n=e("./event.js"),r=new n(t,this);return i.events.push(r),r},this.events=function(e){if(!e)return i.events;var t=this;return e.forEach(function(e){t.createEvent(e)}),t},this.save=function(t,r){return e("fs").writeFile(t,n(this),r),this},this.saveSync=function(t){return e("fs").writeFileSync(t,n(this))},this.serve=function(e,t){return e.writeHead(200,{"Content-Type":"text/calendar; charset=utf-8","Content-Disposition":'attachment; filename="'+(t||"calendar.ics")+'"'}),e.end(n(this)),this},this.toString=function(){return n(this)},this.toJSON=function(){var t=e("./_tools.js");return t.toJSON(this,o)},this.length=function(){return i.events.length},this.clear=function(){return i.domain=e("os").hostname(),i.prodid="//sebbo.net//ical-generator//EN",i.name=null,i.timezone=null,i.ttl=null,i.url=null,i.events=[],this},this.generate=function(){return this},"string"==typeof t&&(t=JSON.parse(t)),this.clear();for(r in t)t.hasOwnProperty(r)&&o.indexOf(r)>-1&&this[r](t[r])};t.exports=r},{"./_tools.js":28,"./event.js":32,fs:26,os:34}],32:[function(e,t,n){"use strict";var r=function(t,n){var r,i,o,s=["id","uid","sequence","start","end","timezone","stamp","timestamp","allDay","floating","repeating","summary","location","description","organizer","attendees","alarms","method","status","url"];if(!n)throw"`calendar` option required!";r={allowedMethods:["PUBLISH","REQUEST","REPLY","ADD","CANCEL","REFRESH","COUNTER","DECLINECOUNTER"],allowedRepeatingFreq:["SECONDLY","MINUTELY","HOURLY","DAILY","WEEKLY","MONTHLY","YEARLY"],allowedStatuses:["CONFIRMED","TENATIVE","CANCELLED"]},o={id:("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).substr(-4),sequence:0,start:null,end:null,timezone:void 0,stamp:new Date,allDay:!1,floating:!1,repeating:null,summary:"",location:null,description:null,organizer:null,attendees:[],alarms:[],method:null,status:null,url:null},this.id=function(e){return e?(o.id=e,this):o.id},this.uid=this.id,this.sequence=function(e){if(void 0===e)return o.sequence;var t=parseInt(e,10);if(isNaN(t))throw"`sequence` must be a number!";return o.sequence=t,this},this.start=function(e){if(!e)return o.start;if("string"==typeof e&&(e=new Date(e)),!(e instanceof Date)||isNaN(e.getTime()))throw"`start` must be a Date Object!";if(o.start=e,o.start&&o.end&&o.start>o.end){var t=o.start;o.start=o.end,o.end=t}return this},this.end=function(e){if(void 0===e)return o.end;if(!e)return o.end=null,this;if("string"==typeof e&&(e=new Date(e)),!(e instanceof Date)||isNaN(e.getTime()))throw"`end` must be a Date Object!";if(o.end=e,o.start&&o.end&&o.start>o.end){var t=o.start;o.start=o.end,o.end=t}return this},this.timezone=function(e){return void 0===e&&void 0!==o.timezone?o.timezone:void 0===e?n.timezone():(o.timezone=e?e.toString():null,o.timezone&&(o.floating=!1),this)},this.stamp=function(e){if(!e)return o.stamp;if("string"==typeof e&&(e=new Date(e)),!(e instanceof Date)||isNaN(e.getTime()))throw"`stamp` must be a Date Object!";return o.stamp=e,this},this.timestamp=this.stamp,this.allDay=function(e){return void 0===e?o.allDay:(o.allDay=!!e,this)},this.floating=function(e){return void 0===e?o.floating:(o.floating=!!e,o.floating&&(o.timezone=null),this)},this.repeating=function(e){if(void 0===e)return o.repeating;if(!e)return o.repeating=null,this;if(!e.freq||r.allowedRepeatingFreq.indexOf(e.freq.toUpperCase())===-1)throw"`repeating.freq` is a mandatory item, and must be one of the following: "+r.allowedRepeatingFreq.join(", ")+"!";if(o.repeating={freq:e.freq.toUpperCase()},e.count){if(!isFinite(e.count))throw"`repeating.count` must be a Number!";o.repeating.count=e.count}if(e.interval){if(!isFinite(e.interval))throw"`repeating.interval` must be a Number!";o.repeating.interval=e.interval}if(e.until){if("string"==typeof e.until&&(e.until=new Date(e.until)),!(e.until instanceof Date)||isNaN(e.until.getTime()))throw"`repeating.until` must be a Date Object!";o.repeating.until=e.until}return e.byDay&&(Array.isArray(e.byDay)||(e.byDay=[e.byDay]),o.repeating.byDay=[],e.byDay.forEach(function(e){var t=e.toString().toUpperCase();if(["SU","MO","TU","WE","TH","FR","SA"].indexOf(t)===-1)throw"`repeating.byDay` contains invalid value `"+t+"`!";o.repeating.byDay.push(t)})),e.byMonth&&(Array.isArray(e.byMonth)||(e.byMonth=[e.byMonth]),o.repeating.byMonth=[],e.byMonth.forEach(function(e){if("number"!=typeof e||e<1||e>12)throw"`repeating.byMonth` contains invalid value `"+e+"`!";o.repeating.byMonth.push(e)})),e.byMonthDay&&(Array.isArray(e.byMonthDay)||(e.byMonthDay=[e.byMonthDay]),
o.repeating.byMonthDay=[],e.byMonthDay.forEach(function(e){if("number"!=typeof e||e<1||e>31)throw"`repeating.byMonthDay` contains invalid value `"+e+"`!";o.repeating.byMonthDay.push(e)})),this},this.summary=function(e){return void 0===e?o.summary:(o.summary=e?e.toString():"",this)},this.location=function(e){return void 0===e?o.location:(o.location=e?e.toString():null,this)},this.description=function(e){return void 0===e?o.description:(o.description=e?e.toString():null,this)},this.organizer=function(e){if(void 0===e)return o.organizer;if(!e)return o.organizer=null,this;var t=null,n=/^(.+) ?<([^>]+)>$/;if("string"==typeof e&&n.test(e))t={name:RegExp.$1.trim(),email:RegExp.$2};else{if("object"!=typeof e)throw"string"==typeof e?"`organizer` isn't formated correctly. See https://github.com/sebbo2002/ical-generator#organizerstringobject-organizer":"`organizer` needs to be a valid formed string or an object. See https://github.com/sebbo2002/ical-generator#organizerstringobject-organizer";t={name:e.name,email:e.email}}if(!t.name)throw"`organizer.name` is empty!";if(!t.email)throw"`organizer.email` is empty!";return o.organizer={name:t.name,email:t.email},this},this.createAttendee=function(t){var n,r=e("./attendee.js"),i=/^(.+) ?<([^>]+)>$/;if("string"==typeof t&&i.test(t))return n=new r({name:RegExp.$1.trim(),email:RegExp.$2},this),o.attendees.push(n),n;if("string"==typeof t)throw"`attendee` isn't formated correctly. See https://github.com/sebbo2002/ical-generator#createattendeeobject-options";return n=new r(t,this),o.attendees.push(n),n},this.attendees=function(e){if(!e)return o.attendees;var t=this;return e.forEach(function(e){t.createAttendee(e)}),t},this.createAlarm=function(t){var n=e("./alarm.js"),r=new n(t,this);return o.alarms.push(r),r},this.alarms=function(e){if(!e)return o.alarms;var t=this;return e.forEach(function(e){t.createAlarm(e)}),t},this.method=function(e){if(void 0===e)return o.method;if(!e)return o.method=null,this;if(r.allowedMethods.indexOf(e.toUpperCase())===-1)throw"`method` must be one of the following: "+r.allowedMethods.join(", ")+"!";return o.method=e.toUpperCase(),this},this.status=function(e){if(void 0===e)return o.status;if(!e)return o.status=null,this;if(r.allowedStatuses.indexOf(e.toUpperCase())===-1)throw"`status` must be one of the following: "+r.allowedStatuses.join(", ")+"!";return o.status=e.toUpperCase(),this},this.url=function(e){return void 0===e?o.url:(o.url=e?e.toString():null,this)},this.toJSON=function(){var t=e("./_tools.js");return t.toJSON(this,s)},this.generate=function(t){var n=e("./_tools.js"),r="";if(!t)throw"`calendar` option required!";if(!o.start)throw"No value for `start` in ICalEvent #"+o.id+" given!";return o.timezone&&(o.floating=!1),r+="BEGIN:VEVENT\r\n",r+="UID:"+o.id+"@"+t.domain()+"\r\n",r+="SEQUENCE:"+o.sequence+"\r\n",r+="DTSTAMP:"+n.formatDate(o.stamp)+"\r\n",o.allDay?(r+="DTSTART;VALUE=DATE:"+n.formatDate(o.start,!0)+"\r\n",o.end&&(r+="DTEND;VALUE=DATE:"+n.formatDate(o.end,!0)+"\r\n"),r+="X-MICROSOFT-CDO-ALLDAYEVENT:TRUE\r\n",r+="X-MICROSOFT-MSNCALENDAR-ALLDAYEVENT:TRUE\r\n"):(r+=n.formatDateTZ("DTSTART",o.start,o)+"\r\n",o.end&&(r+=n.formatDateTZ("DTEND",o.end,o)+"\r\n")),o.repeating&&(r+="RRULE:FREQ="+o.repeating.freq,o.repeating.count&&(r+=";COUNT="+o.repeating.count),o.repeating.interval&&(r+=";INTERVAL="+o.repeating.interval),o.repeating.until&&(r+=";UNTIL="+n.formatDate(o.repeating.until)),o.repeating.byDay&&(r+=";BYDAY="+o.repeating.byDay.join(",")),o.repeating.byMonth&&(r+=";BYMONTH="+o.repeating.byMonth.join(",")),o.repeating.byMonthDay&&(r+=";BYMONTHDAY="+o.repeating.byMonthDay.join(",")),r+="\r\n"),r+="SUMMARY:"+n.escape(o.summary)+"\r\n",o.location&&(r+="LOCATION:"+n.escape(o.location)+"\r\n"),o.description&&(r+="DESCRIPTION:"+n.escape(o.description)+"\r\n"),o.organizer&&(r+='ORGANIZER;CN="'+n.escape(o.organizer.name)+'":mailto:'+n.escape(o.organizer.email)+"\r\n"),o.attendees.forEach(function(e){r+=e.generate()}),o.alarms.forEach(function(e){r+=e.generate()}),o.url&&(r+="URL;VALUE=URI:"+n.escape(o.url)+"\r\n"),o.method&&(r+="METHOD:"+o.method.toUpperCase()+"\r\n"),o.status&&(r+="STATUS:"+o.status.toUpperCase()+"\r\n"),r+="END:VEVENT\r\n"};for(i in t)t.hasOwnProperty(i)&&s.indexOf(i)>-1&&this[i](t[i])};t.exports=r},{"./_tools.js":28,"./alarm.js":29,"./attendee.js":30}],33:[function(e,t,n){t.exports=function(t){"use strict";var n=e("./calendar.js");return new n(t)}},{"./calendar.js":31}],34:[function(e,t,n){n.endianness=function(){return"LE"},n.hostname=function(){return"undefined"!=typeof location?location.hostname:""},n.loadavg=function(){return[]},n.uptime=function(){return 0},n.freemem=function(){return Number.MAX_VALUE},n.totalmem=function(){return Number.MAX_VALUE},n.cpus=function(){return[]},n.type=function(){return"Browser"},n.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},n.networkInterfaces=n.getNetworkInterfaces=function(){return{}},n.arch=function(){return"javascript"},n.platform=function(){return"browser"},n.tmpdir=n.tmpDir=function(){return"/tmp"},n.EOL="\n"},{}]},{},[2]);